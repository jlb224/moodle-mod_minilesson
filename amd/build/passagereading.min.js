define("mod_minilesson/passagereading",["jquery","core/log","mod_minilesson/definitions","mod_minilesson/cloudpoodllloader","mod_minilesson/ttrecorder"],(function($,log,def,cloudpoodll,ttrecorder){return log.debug("MiniLesson Passage Reading: initialising"),{clone:function(){return $.extend(!0,{},this)},init:function(index,itemdata,quizhelper){this.itemdata=itemdata,this.quizhelper=quizhelper,this.init_components(quizhelper,itemdata),this.register_events(index,itemdata,quizhelper)},next_question:function(percent){var stepdata={};stepdata.index=self.index,stepdata.hasgrade=!0,stepdata.totalitems=1,stepdata.correctitems=percent>0?1:0,stepdata.grade=percent,this.quizhelper.do_next(stepdata)},register_events:function(index,itemdata,quizhelper){var self=this;$("#"+itemdata.uniqueid+"_container .minilesson_nextbutton").on("click",(function(e){self.next_question(0)}))},init_components:function(quizhelper,itemdata){var theCallback=function(message){switch(message.type){case"recording":break;case"speech":log.debug("speech at speechcards");var speechtext=message.capturedspeech,spoken_clean=quizhelper.cleanText(speechtext);log.debug("speechtext:",speechtext),log.debug("spoken:",spoken_clean)}};if(quizhelper.use_ttrecorder()){var opts={};opts.uniqueid=itemdata.uniqueid,opts.callback=theCallback,opts.stt_guided=quizhelper.is_stt_guided(),this.ttrec=ttrecorder.clone(),this.ttrec.init(opts)}else cloudpoodll.init("minilesson-recorder-passagereading-"+itemdata.id,theCallback)}}}));

//# sourceMappingURL=passagereading.min.js.map