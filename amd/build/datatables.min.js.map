{"version":3,"file":"datatables.min.js","sources":["../src/datatables.js"],"sourcesContent":["define(['jquery', 'core/str', 'core/log', 'core/modal_factory', 'core/modal_events', './datatablesLoader',\n    'datatables.net', 'datatables.net-buttons'],\n    function($, str, log, ModalFactory, ModalEvents) {\n    \"use strict\"; // jshint ;_;\n\n/*\nThis file contains class and ID definitions.\n */\n    $.fn.dataTable.ext.buttons.bulkdelete = {\n        text: M.str.mod_minilesson.bulkdelete,\n        className: 'btn btn-primary d-none',\n        attr: {\n            id: 'deleteconfirmation',\n            type:  'submit',\n            name: 'action',\n            value: 'bulkdelete'\n        },\n        action: function(e, dt, node) {\n            var btn = node.closest('button')[0];\n\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: str.get_string('confirmation', 'admin'),\n                body: str.get_string('bulkdeletequestion', 'mod_minilesson'),\n                removeOnClose: true\n            }).then(function(modal) {\n                modal.setSaveButtonText(str.get_string('yes', 'moodle'));\n\n                modal.getRoot().on(ModalEvents.save, function() {\n                    var form = btn.closest('form');\n                    var input = document.createElement('input');\n                    input.setAttribute('type', 'hidden');\n                    input.setAttribute('name', btn.getAttribute('name'));\n                    input.setAttribute('value', btn.getAttribute('value'));\n                    form.appendChild(input);\n                    if (typeof M.core_formchangechecker !== 'undefined') {\n                        M.core_formchangechecker.set_form_submitted();\n                    }\n                    form.submit();\n                });\n\n                modal.show();\n\n                return modal;\n            });\n        }\n    };\n\n    log.debug('MiniLesson Teacher Datatables helper: initialising');\n\n    return{\n        //pass in config, amd set up table\n        init: function(props){\n            //pick up opts from html\n            var thetable=$('#' + props.tableid);\n            this.dt=thetable.DataTable(props.tableprops);\n        },\n\n        getDataTable: function(tableid){\n            return $('#' + tableid).DataTable();\n        }\n\n\n    };//end of return value\n});"],"names":["define","$","str","log","ModalFactory","ModalEvents","fn","dataTable","ext","buttons","bulkdelete","text","M","mod_minilesson","className","attr","id","type","name","value","action","e","dt","node","btn","closest","create","types","SAVE_CANCEL","title","get_string","body","removeOnClose","then","modal","setSaveButtonText","getRoot","on","save","form","input","document","createElement","setAttribute","getAttribute","appendChild","core_formchangechecker","set_form_submitted","submit","show","debug","init","props","thetable","tableid","DataTable","tableprops","getDataTable"],"mappings":"AAAAA,mCAAO,CAAC,SAAU,WAAY,WAAY,qBAAsB,oBAAqB,qBACjF,iBAAkB,2BAClB,SAASC,EAAGC,IAAKC,IAAKC,aAAcC,oBAMpCJ,EAAEK,GAAGC,UAAUC,IAAIC,QAAQC,WAAa,CACpCC,KAAMC,EAAEV,IAAIW,eAAeH,WAC3BI,UAAW,yBACXC,KAAM,CACFC,GAAI,qBACJC,KAAO,SACPC,KAAM,SACNC,MAAO,cAEXC,OAAQ,SAASC,EAAGC,GAAIC,UAChBC,IAAMD,KAAKE,QAAQ,UAAU,GAEjCrB,aAAasB,OAAO,CAChBT,KAAMb,aAAauB,MAAMC,YACzBC,MAAO3B,IAAI4B,WAAW,eAAgB,SACtCC,KAAM7B,IAAI4B,WAAW,qBAAsB,kBAC3CE,eAAe,IAChBC,MAAK,SAASC,cACbA,MAAMC,kBAAkBjC,IAAI4B,WAAW,MAAO,WAE9CI,MAAME,UAAUC,GAAGhC,YAAYiC,MAAM,eAC7BC,KAAOf,IAAIC,QAAQ,QACnBe,MAAQC,SAASC,cAAc,SACnCF,MAAMG,aAAa,OAAQ,UAC3BH,MAAMG,aAAa,OAAQnB,IAAIoB,aAAa,SAC5CJ,MAAMG,aAAa,QAASnB,IAAIoB,aAAa,UAC7CL,KAAKM,YAAYL,YACuB,IAA7B5B,EAAEkC,wBACTlC,EAAEkC,uBAAuBC,qBAE7BR,KAAKS,YAGTd,MAAMe,OAECf,WAKnB/B,IAAI+C,MAAM,sDAEJ,CAEFC,KAAM,SAASC,WAEPC,SAASpD,EAAE,IAAMmD,MAAME,cACtBhC,GAAG+B,SAASE,UAAUH,MAAMI,aAGrCC,aAAc,SAASH,gBACZrD,EAAE,IAAMqD,SAASC"}