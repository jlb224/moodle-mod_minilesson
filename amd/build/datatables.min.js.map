{"version":3,"sources":["../src/datatables.js"],"names":["define","$","str","log","ModalFactory","ModalEvents","fn","dataTable","ext","buttons","bulkdelete","text","M","mod_minilesson","className","attr","id","type","name","value","action","e","dt","node","btn","closest","length","create","types","SAVE_CANCEL","title","get_string","body","removeOnClose","then","modal","setSaveButtonText","getRoot","on","save","form","input","document","createElement","setAttribute","getAttribute","appendChild","core_formchangechecker","set_form_submitted","submit","show","debug","init","props","thetable","tableid","DataTable","tableprops","getDataTable"],"mappings":"AAAAA,OAAM,6BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,UAAvB,CAAmC,oBAAnC,CAAyD,mBAAzD,CAA8E,oBAA9E,CACH,gBADG,CACe,wBADf,CAAD,CAEF,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAsBC,CAAtB,CAAoCC,CAApC,CAAiD,CACjD,aAKAJ,CAAC,CAACK,EAAF,CAAKC,SAAL,CAAeC,GAAf,CAAmBC,OAAnB,CAA2BC,UAA3B,CAAwC,CACpCC,IAAI,CAAEC,CAAC,CAACV,GAAF,CAAMW,cAAN,CAAqBH,UADS,CAEpCI,SAAS,CAAE,wBAFyB,CAGpCC,IAAI,CAAE,CACFC,EAAE,CAAE,oBADF,CAEFC,IAAI,CAAG,QAFL,CAGFC,IAAI,CAAE,QAHJ,CAIFC,KAAK,CAAE,YAJL,CAH8B,CASpCC,MAAM,CAAE,gBAASC,CAAT,CAAYC,CAAZ,CAAgBC,CAAhB,CAAsB,CAC1B,GAAIC,CAAAA,CAAG,CAAGD,CAAI,CAACE,OAAL,CAAa,QAAb,CAAV,CACA,GAAiB,CAAb,CAAAD,CAAG,CAACE,MAAR,CAAoB,CAChBF,CAAG,CAAGA,CAAG,CAAC,CAAD,CACZ,CAEDpB,CAAY,CAACuB,MAAb,CAAoB,CAChBV,IAAI,CAAEb,CAAY,CAACwB,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAE5B,CAAG,CAAC6B,UAAJ,CAAe,cAAf,CAA+B,OAA/B,CAFS,CAGhBC,IAAI,CAAE9B,CAAG,CAAC6B,UAAJ,CAAe,oBAAf,CAAqC,gBAArC,CAHU,CAIhBE,aAAa,GAJG,CAApB,EAKGC,IALH,CAKQ,SAASC,CAAT,CAAgB,CACpBA,CAAK,CAACC,iBAAN,CAAwBlC,CAAG,CAAC6B,UAAJ,CAAe,KAAf,CAAsB,QAAtB,CAAxB,EAEAI,CAAK,CAACE,OAAN,GAAgBC,EAAhB,CAAmBjC,CAAW,CAACkC,IAA/B,CAAqC,UAAW,IACxCC,CAAAA,CAAI,CAAGhB,CAAG,CAACC,OAAJ,CAAY,MAAZ,CADiC,CAExCgB,CAAK,CAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAFgC,CAG5CF,CAAK,CAACG,YAAN,CAAmB,MAAnB,CAA2B,QAA3B,EACAH,CAAK,CAACG,YAAN,CAAmB,MAAnB,CAA2BpB,CAAG,CAACqB,YAAJ,CAAiB,MAAjB,CAA3B,EACAJ,CAAK,CAACG,YAAN,CAAmB,OAAnB,CAA4BpB,CAAG,CAACqB,YAAJ,CAAiB,OAAjB,CAA5B,EACAL,CAAI,CAACM,WAAL,CAAiBL,CAAjB,EACA,GAAwC,WAApC,QAAO7B,CAAAA,CAAC,CAACmC,sBAAb,CAAqD,CACjDnC,CAAC,CAACmC,sBAAF,CAAyBC,kBAAzB,EACH,CACDR,CAAI,CAACS,MAAL,EACH,CAXD,EAaAd,CAAK,CAACe,IAAN,GAEA,MAAOf,CAAAA,CACV,CAxBD,CAyBH,CAxCmC,CAAxC,CA2CAhC,CAAG,CAACgD,KAAJ,CAAU,oDAAV,EAEA,MAAM,CAEFC,IAAI,CAAE,cAASC,CAAT,CAAe,CAEjB,GAAIC,CAAAA,CAAQ,CAACrD,CAAC,CAAC,IAAMoD,CAAK,CAACE,OAAb,CAAd,CACA,KAAKjC,EAAL,CAAQgC,CAAQ,CAACE,SAAT,CAAmBH,CAAK,CAACI,UAAzB,CACX,CANC,CAQFC,YAAY,CAAE,sBAASH,CAAT,CAAiB,CAC3B,MAAOtD,CAAAA,CAAC,CAAC,IAAMsD,CAAP,CAAD,CAAiBC,SAAjB,EACV,CAVC,CAcT,CAnEK,CAAN","sourcesContent":["define(['jquery', 'core/str', 'core/log', 'core/modal_factory', 'core/modal_events', './datatablesLoader',\n    'datatables.net', 'datatables.net-buttons'],\n    function($, str, log, ModalFactory, ModalEvents) {\n    \"use strict\"; // jshint ;_;\n\n/*\nThis file contains class and ID definitions.\n */\n    $.fn.dataTable.ext.buttons.bulkdelete = {\n        text: M.str.mod_minilesson.bulkdelete,\n        className: 'btn btn-primary d-none',\n        attr: {\n            id: 'deleteconfirmation',\n            type:  'submit',\n            name: 'action',\n            value: 'bulkdelete'\n        },\n        action: function(e, dt, node) {\n            var btn = node.closest('button');\n            if (btn.length > 0) {\n                btn = btn[0];\n            }\n\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: str.get_string('confirmation', 'admin'),\n                body: str.get_string('bulkdeletequestion', 'mod_minilesson'),\n                removeOnClose: true\n            }).then(function(modal) {\n                modal.setSaveButtonText(str.get_string('yes', 'moodle'));\n\n                modal.getRoot().on(ModalEvents.save, function() {\n                    var form = btn.closest('form');\n                    var input = document.createElement('input');\n                    input.setAttribute('type', 'hidden');\n                    input.setAttribute('name', btn.getAttribute('name'));\n                    input.setAttribute('value', btn.getAttribute('value'));\n                    form.appendChild(input);\n                    if (typeof M.core_formchangechecker !== 'undefined') {\n                        M.core_formchangechecker.set_form_submitted();\n                    }\n                    form.submit();\n                });\n\n                modal.show();\n\n                return modal;\n            });\n        }\n    };\n\n    log.debug('MiniLesson Teacher Datatables helper: initialising');\n\n    return{\n        //pass in config, amd set up table\n        init: function(props){\n            //pick up opts from html\n            var thetable=$('#' + props.tableid);\n            this.dt=thetable.DataTable(props.tableprops);\n        },\n\n        getDataTable: function(tableid){\n            return $('#' + tableid).DataTable();\n        }\n\n\n    };//end of return value\n});"],"file":"datatables.min.js"}